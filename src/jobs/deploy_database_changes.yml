description: >
  The job will run a database migration with Liquibase. Tutorial examples: https://docs.liquibase.com/install/tutorials/home.html

docker:
  - image: liquibase/liquibase:latest

parameters:
  changelogFile:
    type: string
    default: "changelog.xml"
    description: "changelog file"

  url:
    type: env_var_name
    default: URL_VAR
    # default: "jdbc:h2:file:./h2tutorial"
    description: "JDBC url to database endpoint"

  username:
    type: string
    default: "admin"
    description: "Database username"

  password:
    type: string
    default: "password"
    description: "Database password"

steps:
  - checkout
  - update:
      changelogFile: << parameters.changelogFile >>
